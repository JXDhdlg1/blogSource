---
title: 秒杀系统下的扣减库存改版
date: 2020-09-17 14:08:08
tags: 项目整理
categories: 项目整理
---
### 项目背景
- 整点秒杀业务带来流量尖峰

### 原设计
- 扣件接口整体加锁
- 直接操作mysql数据库，然后更新redis

### 系统优化
- 根据库存进行锁细粒度优化，分桶
- 直接操作redis，通过消息更新数据库
- 限流

### 优化结果
- 接口qp压测到8000，性能良好
- 压测下平均耗时由接近2s降低至低于600ms
